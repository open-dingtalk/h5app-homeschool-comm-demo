{"version":3,"sources":["components/Classes.js","App.js","reportWebVitals.js","index.js"],"names":["Classes","props","showType","className","students","map","item","i","value","userid","name","onChange","addUser","date","dateString","placeholder","onClick","type","App","state","domain","corpId","authCode","userId","userName","deptList","deptId","classUserList","classId","origin","sendMessage","stuList","title","text","time","e","msg","this","push","id","target","setState","axios","post","JSON","stringify","headers","then","res","message","success","catch","error","alert","deptOptions","login","window","location","chooseDept","deptType","v","setTime","sendMsg","getClassUserList","getDeptList","get","data","result","details","loginAction","_this","dd","permission","requestAuthCode","onSuccess","code","setTimeout","onFail","err","React","Component","withRouter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","basename","path","component","document","getElementById"],"mappings":"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","file":"static/js/main.7bfd5469.chunk.js","sourcesContent":["import react from \"react\"\nimport { Checkbox, DatePicker, Button } from \"antd\"\n\nconst Classes = (props) => {\n  const onChange = (date, dateString) => {\n    props.onChange(date, dateString)\n  }\n  if (props.showType === 1) {\n    return (\n      <div>\n        <h3 className=\"title\">{props.className}</h3>\n        <h4 className=\"littleTitle\">放学通知</h4>\n        {/*[\n          { name: \"11111\", userid: \"22222\" },\n          { name: \"33333\", userid: \"4444\" },\n        ]  */}\n        {props.students.map((item, i) => (\n          <div className=\"radioList\">\n            <Checkbox\n              value={item.userid}\n              name={item.name}\n              onChange={props.addUser}\n            >\n              {item.name}\n            </Checkbox>\n          </div>\n        ))}\n        <p>\n          放学时间：\n          <DatePicker\n            onChange={onChange}\n            value={props.date}\n            placeholder=\"请选择时间\"\n          />\n        </p>\n        <br />\n        <p>\n          <Button onClick={props.onClick} type=\"primary\">\n            发送放学通知\n          </Button>\n        </p>\n      </div>\n    )\n  } else {\n    return <div></div>\n  }\n}\n\nexport default Classes\n","import * as dd from \"dingtalk-jsapi\"\nimport axios from \"axios\"\nimport React from \"react\"\nimport \"./App.css\"\nimport { withRouter } from \"react-router-dom\"\nimport { message } from \"antd\"\nimport Classes from \"./components/Classes\"\nimport \"antd/dist/antd.min.css\"\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      //内网穿透工具介绍:\n      // https://developers.dingtalk.com/document/resourcedownload/http-intranet-penetration?pnamespace=app\n      // 替换成后端服务域名\n      domain: \"\",\n      corpId: \"\",\n      authCode: \"\",\n      userId: \"\",\n      userName: \"\",\n      deptList: [],\n      deptId: 0,\n      students: [],\n      classUserList: [],\n      showType: 1,\n      className: \"\",\n      classId: \"\",\n      origin: \"\",\n      sendMessage: {\n        stuList: [],\n        title: \"放学通知\",\n        text: \"放学时间为\",\n        time: \"\",\n        date: \"\",\n      },\n    }\n  }\n  addUser(e) {\n    let msg = this.state.sendMessage\n    msg.stuList.push({\n      id: e.target.value,\n      name: e.target.name,\n    })\n    this.setState({\n      sendMessage: msg,\n    })\n  }\n  setTime(date, dateString) {\n    let msg = this.state.sendMessage\n    msg.time = dateString\n    msg.date = date\n    this.setState({\n      sendMessage: msg,\n    })\n  }\n  sendMsg(e) {\n    let msg = this.state.sendMessage\n    msg.classId = this.state.classId\n    msg.origin = this.state.origin\n    delete msg.date\n    axios\n      .post(this.state.domain + \"/homeschool/sendMsg\", JSON.stringify(msg), {\n        headers: { \"Content-Type\": \"application/json\" },\n      })\n      .then((res) => {\n        message.success(\"放学通知已发出！\")\n        this.setState({\n          sendMessage: {\n            stuList: [],\n            title: \"放学通知\",\n            text: \"放学时间为：\",\n            time: \"\",\n            date: \"\",\n          },\n        })\n      })\n      .catch((error) => {\n        alert(\"tongzhi err \" + JSON.stringify(error))\n      })\n  }\n  render() {\n    if (this.state.userId === \"\") {\n      this.login()\n    }\n    if (this.state.origin === \"\") {\n      let origin = window.location.origin\n      this.setState({\n        origin: origin,\n      })\n    }\n    let deptOptions\n    if (this.state.showType === 0) {\n      deptOptions = (\n        <div>\n          <h3 className=\"title\">选择部门：</h3>\n          {/* [\n            { name: \"111111\", deptId: \"deptId\", deptType: \"deptType\" },\n            { name: \"22222\", deptId: \"deptId2222\", deptType: \"deptType2222\" },\n          ] */}\n          {this.state.deptList.map((item, i) => (\n            <div key={i}>\n              <p>\n                <a className=\"AppLink\">\n                  <span\n                    onClick={(e) =>\n                      this.chooseDept(e, item.deptId, item.deptType, item.name)\n                    }\n                  >\n                    {item.name}\n                  </span>\n                </a>\n              </p>\n            </div>\n          ))}\n        </div>\n      )\n    } else {\n      deptOptions = <div></div>\n    }\n    return (\n      <div className=\"App\">\n        {deptOptions}\n        <Classes\n          showType={this.state.showType}\n          students={this.state.students}\n          className={this.state.className}\n          addUser={(e) => this.addUser(e)}\n          onChange={(e, v) => this.setTime(e, v)}\n          date={this.state.sendMessage.date}\n          onClick={(e) => this.sendMsg(e)}\n        />\n      </div>\n    )\n  }\n  chooseDept(e, deptId, deptType, name) {\n    if (deptType === \"class\") {\n      this.setState({\n        classId: deptId,\n        className: name,\n      })\n      this.getClassUserList(deptId)\n    } else {\n      this.setState({\n        deptId: deptId,\n      })\n      this.getDeptList(deptId)\n    }\n  }\n  getClassUserList(classId) {\n    axios\n      .get(this.state.domain + \"/homeschool/classUserList?classId=\" + classId)\n      .then((res) => {\n        this.setState({\n          students: res.data.data.result.details,\n          showType: 1,\n        })\n      })\n      .catch((error) => {\n        alert(\"class err \" + JSON.stringify(error))\n      })\n  }\n  getDeptList(deptId) {\n    axios\n      .get(this.state.domain + \"/homeschool/deptList?deptId=\" + deptId)\n      .then((res) => {\n        this.setState({\n          deptList: res.data.data.result.details,\n          showType: 0,\n        })\n      })\n      .catch((error) => {\n        alert(\"dept err \" + JSON.stringify(error))\n      })\n  }\n\n  login() {\n    axios\n      .get(this.state.domain + \"/getCorpId\")\n      .then((res) => {\n        if (res.data) {\n          this.loginAction(res.data)\n        }\n      })\n      .catch((error) => {\n        alert(\"corpId err, \" + JSON.stringify(error))\n      })\n  }\n  loginAction(corpId) {\n    let _this = this\n    dd.runtime.permission.requestAuthCode({\n      corpId: corpId, //企业 corpId\n      onSuccess: function (res) {\n        // 调用成功时回调\n        _this.state.authCode = res.code\n        axios\n          .get(_this.state.domain + \"/login?authCode=\" + _this.state.authCode)\n          .then((res) => {\n            if (res && res.data.success) {\n              let userId = res.data.data.userId\n              let userName = res.data.data.userName\n              message.success(\"登录成功，你好\" + userName)\n              setTimeout(function () {\n                _this.setState({\n                  userId: userId,\n                  userName: userName,\n                })\n              }, 0)\n              _this.getDeptList(0)\n            } else {\n              alert(\"login failed --->\" + JSON.stringify(res))\n            }\n          })\n          .catch((error) => {\n            alert(\"httpRequest failed --->\" + JSON.stringify(error))\n          })\n      },\n      onFail: function (err) {\n        // 调用失败时回调\n        alert(\"requestAuthCode failed --->\" + JSON.stringify(err))\n      },\n    })\n  }\n}\n\nexport default withRouter(App)\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {BrowserRouter, Route} from 'react-router-dom'\n\nReactDOM.render(\n    <BrowserRouter basename='/'>\n        <Route path={`/`} component={App}></Route>\n    </BrowserRouter>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}