(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{285:function(e,t,s){},294:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),i=s(37),c=s.n(i),d=(s(48),s(38)),o=s(39),r=s(43),u=s(42),h=s(40),l=s(14),p=s.n(l),g=(s(285),s(4)),j=s(2);function f(e){return 1===e.showType?Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:e.className}),Object(j.jsx)("h4",{children:"\u653e\u5b66\u901a\u77e5"}),e.students.map((function(t,s){return Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",value:t.userid,name:t.name,onChange:e.addUser}),Object(j.jsx)("span",{children:t.name})]},"stu"+s)})),Object(j.jsxs)("p",{children:["\u653e\u5b66\u65f6\u95f4\uff1a",Object(j.jsx)("input",{type:"date",value:e.time,onChange:e.onChange})]}),Object(j.jsx)("p",{children:Object(j.jsx)("button",{onClick:e.onClick,children:"\u53d1\u9001\u653e\u5b66\u901a\u77e5"})})]}):Object(j.jsx)("div",{})}var m=function(e){Object(r.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={domain:"http://abcdefg.vaiwan.com",corpId:"",authCode:"",userId:"",userName:"",deptList:[],deptId:0,students:[],classUserList:[],showType:0,className:"",classId:"",sendMessage:{stuList:[],title:"\u653e\u5b66\u901a\u77e5",text:"\u653e\u5b66\u65f6\u95f4\u4e3a",time:""}},n}return Object(o.a)(s,[{key:"addUser",value:function(e){console.log(e.target.value),console.log(e.target.name);var t=this.state.sendMessage;t.stuList.push({id:e.target.value,name:e.target.name}),this.setState({sendMessage:t})}},{key:"setTime",value:function(e){alert("time:",e.target.value);var t=this.state.sendMessage;t.time=e.target.value,this.setState({sendMessage:t})}},{key:"sendMsg",value:function(e){var t=this,s=this.state.sendMessage;s.classId=this.state.classId,this.setState({sendMessage:s}),p.a.post(this.state.domain+"/homeschool/sendMsg",JSON.stringify(this.state.sendMessage),{headers:{"Content-Type":"application/json"}}).then((function(e){alert("\u653e\u5b66\u901a\u77e5\u5df2\u53d1\u51fa\uff01"),t.setState({sendMessage:{stuList:[],title:"\u653e\u5b66\u901a\u77e5",text:"\u653e\u5b66\u65f6\u95f4\u4e3a\uff1a",time:""}})})).catch((function(e){alert("tongzhi err "+JSON.stringify(e))}))}},{key:"render",value:function(){var e,t=this;return""===this.state.userId&&this.login(),e=0===this.state.showType?Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"\u9009\u62e9\u90e8\u95e8\uff1a"}),this.state.deptList.map((function(e,s){return Object(j.jsx)("div",{children:Object(j.jsx)("p",{children:Object(j.jsx)("u",{children:Object(j.jsx)("span",{onClick:function(s){return t.chooseDept(s,e.deptId,e.deptType,e.name)},children:e.name})})})},s)}))]}):Object(j.jsx)("div",{}),Object(j.jsxs)("div",{children:[e,Object(j.jsx)(f,{showType:this.state.showType,students:this.state.students,className:this.state.className,addUser:function(e){return t.addUser(e)},onChange:function(e){return t.setTime(e)},time:this.state.sendMessage.time,onClick:function(e){return t.sendMsg(e)}})]})}},{key:"chooseDept",value:function(e,t,s,n){console.log("chooseDept deptId : "+t),"class"===s?(this.setState({classId:t,className:n}),this.getClassUserList(t)):(this.setState({deptId:t}),this.getDeptList(t))}},{key:"getClassUserList",value:function(e){var t=this;p.a.get(this.state.domain+"/homeschool/classUserList?classId="+e).then((function(e){alert("students --- "),t.setState({students:e.data.data.result.details,showType:1})})).catch((function(e){alert("class err "+JSON.stringify(e))}))}},{key:"getDeptList",value:function(e){var t=this;p.a.get(this.state.domain+"/homeschool/deptList?deptId="+e).then((function(e){t.setState({deptList:e.data.data.result.details,showType:0})})).catch((function(e){alert("dept err "+JSON.stringify(e))}))}},{key:"login",value:function(){var e=this;h.runtime.permission.requestAuthCode({corpId:"ding9f50b15bccd16741",onSuccess:function(t){e.state.authCode=t.code,p.a.get(e.state.domain+"/login?authCode="+e.state.authCode).then((function(t){if(t&&t.data.success){var s=t.data.data.userId,n=t.data.data.userName;alert("\u767b\u9646\u6210\u529f\uff0c\u4f60\u597d\uff0c"+n),e.setState({userId:s,userName:n}),e.getDeptList(0)}else alert("login failed ---\x3e",t)})).catch((function(e){alert("httpRequest failed ---\x3e",JSON.stringify(e))}))},onFail:function(e){alert("requestAuthCode failed ---\x3e",JSON.stringify(e))}})}}]),s}(a.a.Component),b=Object(g.e)(m),v=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,295)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;s(e),n(e),a(e),i(e),c(e)}))},O=s(21);c.a.render(Object(j.jsx)(O.a,{basename:"/",children:Object(j.jsx)(g.a,{path:"/",component:b})}),document.getElementById("root")),v()},48:function(e,t,s){}},[[294,1,2]]]);
//# sourceMappingURL=main.b14cfb75.chunk.js.map