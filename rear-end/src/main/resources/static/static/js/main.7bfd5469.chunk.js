(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{163:function(t,e,s){},400:function(t,e,s){},478:function(t,e,s){"use strict";s.r(e);var a=s(0),n=s.n(a),i=s(26),c=s.n(i),d=(s(163),s(18)),o=s(19),r=s(22),h=s(21),u=s(136),l=s(67),p=s.n(l),g=(s(400),s(20)),f=s(154),j=s(480),m=s(479),O=s(155),b=s(14),v=function(t){return 1===t.showType?Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{className:"title",children:t.className}),Object(b.jsx)("h4",{className:"littleTitle",children:"\u653e\u5b66\u901a\u77e5"}),t.students.map((function(e,s){return Object(b.jsx)("div",{className:"radioList",children:Object(b.jsx)(j.a,{value:e.userid,name:e.name,onChange:t.addUser,children:e.name})})})),Object(b.jsxs)("p",{children:["\u653e\u5b66\u65f6\u95f4\uff1a",Object(b.jsx)(m.a,{onChange:function(e,s){t.onChange(e,s)},value:t.date,placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4"})]}),Object(b.jsx)("br",{}),Object(b.jsx)("p",{children:Object(b.jsx)(O.a,{onClick:t.onClick,type:"primary",children:"\u53d1\u9001\u653e\u5b66\u901a\u77e5"})})]}):Object(b.jsx)("div",{})},y=(s(470),function(t){Object(r.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(d.a)(this,s),(a=e.call(this,t)).state={domain:"",corpId:"",authCode:"",userId:"",userName:"",deptList:[],deptId:0,students:[],classUserList:[],showType:1,className:"",classId:"",origin:"",sendMessage:{stuList:[],title:"\u653e\u5b66\u901a\u77e5",text:"\u653e\u5b66\u65f6\u95f4\u4e3a",time:"",date:""}},a}return Object(o.a)(s,[{key:"addUser",value:function(t){var e=this.state.sendMessage;e.stuList.push({id:t.target.value,name:t.target.name}),this.setState({sendMessage:e})}},{key:"setTime",value:function(t,e){var s=this.state.sendMessage;s.time=e,s.date=t,this.setState({sendMessage:s})}},{key:"sendMsg",value:function(t){var e=this,s=this.state.sendMessage;s.classId=this.state.classId,s.origin=this.state.origin,delete s.date,p.a.post(this.state.domain+"/homeschool/sendMsg",JSON.stringify(s),{headers:{"Content-Type":"application/json"}}).then((function(t){f.b.success("\u653e\u5b66\u901a\u77e5\u5df2\u53d1\u51fa\uff01"),e.setState({sendMessage:{stuList:[],title:"\u653e\u5b66\u901a\u77e5",text:"\u653e\u5b66\u65f6\u95f4\u4e3a\uff1a",time:"",date:""}})})).catch((function(t){alert("tongzhi err "+JSON.stringify(t))}))}},{key:"render",value:function(){var t,e=this;if(""===this.state.userId&&this.login(),""===this.state.origin){var s=window.location.origin;this.setState({origin:s})}return t=0===this.state.showType?Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{className:"title",children:"\u9009\u62e9\u90e8\u95e8\uff1a"}),this.state.deptList.map((function(t,s){return Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:Object(b.jsx)("a",{className:"AppLink",children:Object(b.jsx)("span",{onClick:function(s){return e.chooseDept(s,t.deptId,t.deptType,t.name)},children:t.name})})})},s)}))]}):Object(b.jsx)("div",{}),Object(b.jsxs)("div",{className:"App",children:[t,Object(b.jsx)(v,{showType:this.state.showType,students:this.state.students,className:this.state.className,addUser:function(t){return e.addUser(t)},onChange:function(t,s){return e.setTime(t,s)},date:this.state.sendMessage.date,onClick:function(t){return e.sendMsg(t)}})]})}},{key:"chooseDept",value:function(t,e,s,a){"class"===s?(this.setState({classId:e,className:a}),this.getClassUserList(e)):(this.setState({deptId:e}),this.getDeptList(e))}},{key:"getClassUserList",value:function(t){var e=this;p.a.get(this.state.domain+"/homeschool/classUserList?classId="+t).then((function(t){e.setState({students:t.data.data.result.details,showType:1})})).catch((function(t){alert("class err "+JSON.stringify(t))}))}},{key:"getDeptList",value:function(t){var e=this;p.a.get(this.state.domain+"/homeschool/deptList?deptId="+t).then((function(t){e.setState({deptList:t.data.data.result.details,showType:0})})).catch((function(t){alert("dept err "+JSON.stringify(t))}))}},{key:"login",value:function(){var t=this;p.a.get(this.state.domain+"/getCorpId").then((function(e){e.data&&t.loginAction(e.data)})).catch((function(t){alert("corpId err, "+JSON.stringify(t))}))}},{key:"loginAction",value:function(t){var e=this;u.runtime.permission.requestAuthCode({corpId:t,onSuccess:function(t){e.state.authCode=t.code,p.a.get(e.state.domain+"/login?authCode="+e.state.authCode).then((function(t){if(t&&t.data.success){var s=t.data.data.userId,a=t.data.data.userName;f.b.success("\u767b\u5f55\u6210\u529f\uff0c\u4f60\u597d"+a),setTimeout((function(){e.setState({userId:s,userName:a})}),0),e.getDeptList(0)}else alert("login failed ---\x3e"+JSON.stringify(t))})).catch((function(t){alert("httpRequest failed ---\x3e"+JSON.stringify(t))}))},onFail:function(t){alert("requestAuthCode failed ---\x3e"+JSON.stringify(t))}})}}]),s}(n.a.Component)),x=Object(g.e)(y),C=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,481)).then((function(e){var s=e.getCLS,a=e.getFID,n=e.getFCP,i=e.getLCP,c=e.getTTFB;s(t),a(t),n(t),i(t),c(t)}))},N=s(108);c.a.render(Object(b.jsx)(N.a,{basename:"/",children:Object(b.jsx)(g.a,{path:"/",component:x})}),document.getElementById("root")),C()}},[[478,1,2]]]);
//# sourceMappingURL=main.7bfd5469.chunk.js.map