{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["Classes","props","showType","className","students","map","item","i","type","value","userid","name","onChange","addUser","time","onClick","App","state","domain","corpId","authCode","userId","userName","deptList","deptId","classUserList","classId","origin","sendMessage","stuList","title","text","e","console","log","target","msg","this","push","id","setState","alert","axios","post","JSON","stringify","headers","then","res","catch","error","deptOptions","login","window","location","chooseDept","deptType","setTime","sendMsg","getClassUserList","getDeptList","get","data","result","details","loginAction","_this","dd","permission","requestAuthCode","onSuccess","code","success","setTimeout","onFail","err","React","Component","withRouter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","basename","path","component","document","getElementById"],"mappings":"wQAMA,SAASA,EAASC,GACd,OAAuB,IAAnBA,EAAMC,SAEF,gCACI,6BAAKD,EAAME,YACX,0DAEIF,EAAMG,SAASC,KAAI,SAACC,EAAMC,GAAP,OACf,kCACI,uBAAOC,KAAK,WAAWC,MAAOH,EAAKI,OAAQC,KAAML,EAAKK,KAAMC,SAAUX,EAAMY,UAC5E,+BAAOP,EAAKK,SAFJ,MAAQJ,MAM5B,+DAAQ,uBAAOC,KAAK,OAAOC,MAAOR,EAAMa,KAAMF,SAAUX,EAAMW,cAC9D,4BACI,wBAAQG,QAASd,EAAMc,QAAvB,uDAKL,wB,IAuBTC,E,kDACF,WAAYf,GAAQ,IAAD,8BACf,cAAMA,IACDgB,MAAQ,CAITC,OAAQ,GACRC,OAAQ,GACRC,SAAU,GACVC,OAAQ,GACRC,SAAU,GACVC,SAAS,GACTC,OAAQ,EACRpB,SAAU,GACVqB,cAAe,GACfvB,SAAS,EACTC,UAAW,GACXuB,QAAS,GACTC,OAAQ,GACRC,YAAY,CACRC,QAAQ,GACRC,MAAM,2BACNC,KAAK,iCACLjB,KAAK,KAvBE,E,2CA2BnB,SAAQkB,GACJC,QAAQC,IAAIF,EAAEG,OAAO1B,OACrBwB,QAAQC,IAAIF,EAAEG,OAAOxB,MACrB,IAAIyB,EAAMC,KAAKpB,MAAMW,YACrBQ,EAAIP,QAAQS,KAAK,CACbC,GAAGP,EAAEG,OAAO1B,MACZE,KAAKqB,EAAEG,OAAOxB,OAElB0B,KAAKG,SAAS,CACVZ,YAAaQ,M,qBAGrB,SAAQJ,GACJS,MAAM,QAAST,EAAEG,OAAO1B,OACxB,IAAI2B,EAAMC,KAAKpB,MAAMW,YACrBQ,EAAItB,KAAOkB,EAAEG,OAAO1B,MACpB4B,KAAKG,SAAS,CACVZ,YAAaQ,M,qBAGrB,SAAQJ,GAAG,IAAD,OACFI,EAAMC,KAAKpB,MAAMW,YACrBQ,EAAIV,QAAUW,KAAKpB,MAAMS,QACzBU,EAAIT,OAASU,KAAKpB,MAAMU,OACxBe,IAAMC,KAAKN,KAAKpB,MAAMC,OAAS,sBAAuB0B,KAAKC,UAAUT,GACjE,CAACU,QAAQ,CAAC,eAAe,sBAC3BC,MAAK,SAAAC,GACCP,MAAM,oDACN,EAAKD,SAAS,CACVZ,YAAY,CACRC,QAAQ,GACRC,MAAM,2BACNC,KAAK,uCACLjB,KAAK,SAGdmC,OAAM,SAAAC,GACTT,MAAM,eAAiBG,KAAKC,UAAUK,S,oBAG9C,WAAU,IAUFC,EAVC,OAIL,GAHyB,KAAtBd,KAAKpB,MAAMI,QACVgB,KAAKe,QAEgB,KAAtBf,KAAKpB,MAAMU,OAAc,CACxB,IAAIA,EAAS0B,OAAOC,SAAS3B,OAC7BU,KAAKG,SAAS,CACVb,OAAQA,IAmBhB,OAdIwB,EADuB,IAAxBd,KAAKpB,MAAMf,SAEN,gCACI,gEAEImC,KAAKpB,MAAMM,SAASlB,KAAI,SAACC,EAAMC,GAAP,OACpB,8BACI,4BAAG,4BAAG,sBAAMQ,QAAS,SAACiB,GAAD,OAAO,EAAKuB,WAAWvB,EAAG1B,EAAKkB,OAAQlB,EAAKkD,SAAUlD,EAAKK,OAA1E,SAAkFL,EAAKK,YADvFJ,SAOZ,wBAGd,gCACK4C,EACD,cAACnD,EAAD,CACIE,SAAUmC,KAAKpB,MAAMf,SACrBE,SAAUiC,KAAKpB,MAAMb,SACrBD,UAAWkC,KAAKpB,MAAMd,UACtBU,QAAS,SAACmB,GAAD,OAAO,EAAKnB,QAAQmB,IAC7BpB,SAAU,SAACoB,GAAD,OAAO,EAAKyB,QAAQzB,IAC9BlB,KAAMuB,KAAKpB,MAAMW,YAAYd,KAC7BC,QAAS,SAACiB,GAAD,OAAO,EAAK0B,QAAQ1B,W,wBAK7C,SAAWA,EAAGR,EAAQgC,EAAU7C,GAC5BsB,QAAQC,IAAI,uBAAyBV,GACrB,UAAbgC,GACCnB,KAAKG,SAAS,CACVd,QAASF,EACTrB,UAAWQ,IAEf0B,KAAKsB,iBAAiBnC,KAEtBa,KAAKG,SAAS,CACVhB,OAAQA,IAEZa,KAAKuB,YAAYpC,M,8BAGzB,SAAiBE,GAAS,IAAD,OACrBgB,IAAMmB,IAAIxB,KAAKpB,MAAMC,OAAS,qCAAuCQ,GAChEqB,MAAK,SAAAC,GAEFP,MAAM,iBACN,EAAKD,SAAS,CACVpC,SAAU4C,EAAIc,KAAKA,KAAKC,OAAOC,QAC/B9D,SAAS,OAGd+C,OAAM,SAAAC,GACTT,MAAM,aAAeG,KAAKC,UAAUK,S,yBAG5C,SAAY1B,GAAQ,IAAD,OACfkB,IAAMmB,IAAIxB,KAAKpB,MAAMC,OAAS,+BAAiCM,GAC1DuB,MAAK,SAAAC,GAEF,EAAKR,SAAS,CACVjB,SAAUyB,EAAIc,KAAKA,KAAKC,OAAOC,QAC/B9D,SAAS,OAEd+C,OAAM,SAAAC,GACTT,MAAM,YAAcG,KAAKC,UAAUK,S,mBAI3C,WAAQ,IAAD,OACHR,IAAMmB,IAAIxB,KAAKpB,MAAMC,OAAS,cACzB6B,MAAK,SAAAC,GACCA,EAAIc,MACH,EAAKG,YAAYjB,EAAIc,SAE1Bb,OAAM,SAAAC,GACTT,MAAM,eAAiBG,KAAKC,UAAUK,S,yBAG9C,SAAY/B,GAER,IAAI+C,EAAQ7B,KACZ8B,UAAWC,WAAWC,gBAAgB,CAClClD,OAAQA,EACRmD,UAAY,SAAStB,GAEjBkB,EAAMjD,MAAMG,SAAW4B,EAAIuB,KAC3B7B,IAAMmB,IAAIK,EAAMjD,MAAMC,OAAS,mBAAqBgD,EAAMjD,MAAMG,UAC9D2B,MAAK,SAAAC,GACH,GAAIA,GAAOA,EAAIc,KAAKU,QAAS,CACzB,IAAInD,EAAS2B,EAAIc,KAAKA,KAAKzC,OACvBC,EAAW0B,EAAIc,KAAKA,KAAKxC,SAC7BmB,MAAM,6CAAYnB,GAClBmD,YAAW,WACPP,EAAM1B,SAAS,CACXnB,OAAOA,EACPC,SAASA,MAEd,GACH4C,EAAMN,YAAY,QAElBnB,MAAM,uBAAsBG,KAAKC,UAAUG,OAEhDC,OAAM,SAAAC,GACLT,MAAM,6BAA4BG,KAAKC,UAAUK,QAGzDwB,OAAS,SAASC,GAEdlC,MAAM,iCAAgCG,KAAKC,UAAU8B,W,GA/LnDC,IAAMC,WAsMTC,cAAW9D,GC5OX+D,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBlC,MAAK,YAAkD,IAA/CmC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,QCAdO,IAASC,OACL,cAAC,IAAD,CAAeC,SAAS,IAAxB,SACI,cAAC,IAAD,CAAOC,KAAI,IAAOC,UAAW3E,MAEjC4E,SAASC,eAAe,SAM5Bd,K","file":"static/js/main.e2f067cb.chunk.js","sourcesContent":["import * as dd from 'dingtalk-jsapi';\nimport axios from 'axios';\nimport React from 'react';\nimport './App.css';\nimport { withRouter } from 'react-router-dom';\n\nfunction Classes (props) {\n    if (props.showType === 1) {\n        return (\n            <div>\n                <h3>{props.className}</h3>\n                <h4>放学通知</h4>\n                {\n                    props.students.map((item, i) =>\n                        <label key={\"stu\" + i}>\n                            <input type=\"checkbox\" value={item.userid} name={item.name} onChange={props.addUser}/>\n                            <span>{item.name}</span>\n                        </label>\n                    )\n                }\n                <p>放学时间：<input type=\"date\" value={props.time} onChange={props.onChange}/></p>\n                <p>\n                    <button onClick={props.onClick}>发送放学通知</button>\n                </p>\n            </div>\n        )\n    } else {\n        return <div></div>\n    }\n}\n\nfunction DeptList(props){\n    if(props.showType === 0){\n        return(\n            <div>\n                <h3>选择部门：</h3>\n                {\n                    props.deptList.map((item, i) =>\n                        <div key={i}>\n                            <p><u><span onClick={(e) => props.chooseDept(e, item.deptId, item.deptType, item.name)}>{item.name}</span></u></p>\n                        </div>\n                    )\n                }\n            </div>\n        )\n    }else{\n        return <div></div>\n    }\n}\n\nclass App extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            //内网穿透工具介绍:\n            // https://developers.dingtalk.com/document/resourcedownload/http-intranet-penetration?pnamespace=app\n            // 替换成后端服务域名\n            domain: \"\",\n            corpId: '',\n            authCode: '',\n            userId: '',\n            userName: '',\n            deptList:[],\n            deptId: 0,\n            students: [],\n            classUserList: [],\n            showType:0,\n            className: '',\n            classId: '',\n            origin: '',\n            sendMessage:{\n                stuList:[],\n                title:\"放学通知\",\n                text:\"放学时间为\",\n                time:\"\",\n            }\n        }\n    }\n    addUser(e){\n        console.log(e.target.value);\n        console.log(e.target.name);\n        let msg = this.state.sendMessage;\n        msg.stuList.push({\n            id:e.target.value,\n            name:e.target.name\n        })\n        this.setState({\n            sendMessage: msg\n        })\n    }\n    setTime(e){\n        alert(\"time:\", e.target.value)\n        let msg = this.state.sendMessage;\n        msg.time = e.target.value;\n        this.setState({\n            sendMessage: msg\n        })\n    }\n    sendMsg(e){\n        let msg = this.state.sendMessage;\n        msg.classId = this.state.classId;\n        msg.origin = this.state.origin;\n        axios.post(this.state.domain + \"/homeschool/sendMsg\", JSON.stringify(msg),\n            {headers:{\"Content-Type\":\"application/json\"}}\n        ).then(res => {\n                alert(\"放学通知已发出！\");\n                this.setState({\n                    sendMessage:{\n                        stuList:[],\n                        title:\"放学通知\",\n                        text:\"放学时间为：\",\n                        time:\"\"\n                    },\n                })\n            }).catch(error => {\n            alert(\"tongzhi err \" + JSON.stringify(error))\n        })\n    }\n    render() {\n        if(this.state.userId === ''){\n            this.login();\n        }\n        if(this.state.origin === ''){\n            let origin = window.location.origin;\n            this.setState({\n                origin: origin\n            })\n        }\n        let deptOptions;\n        if(this.state.showType === 0){\n            deptOptions =\n                <div>\n                    <h3>选择部门：</h3>\n                    {\n                        this.state.deptList.map((item, i) =>\n                            <div key={i}>\n                                <p><u><span onClick={(e) => this.chooseDept(e, item.deptId, item.deptType, item.name)}>{item.name}</span></u></p>\n                            </div>\n                        )\n                    }\n                </div>\n        }else{\n            deptOptions = <div></div>\n        }\n        return(\n            <div>\n                {deptOptions}\n                <Classes\n                    showType={this.state.showType}\n                    students={this.state.students}\n                    className={this.state.className}\n                    addUser={(e) => this.addUser(e)}\n                    onChange={(e) => this.setTime(e)}\n                    time={this.state.sendMessage.time}\n                    onClick={(e) => this.sendMsg(e)}\n                />\n            </div>\n        )\n    }\n    chooseDept(e, deptId, deptType, name){\n        console.log(\"chooseDept deptId : \" + deptId);\n        if(deptType === 'class'){\n            this.setState({\n                classId: deptId,\n                className: name\n            });\n            this.getClassUserList(deptId);\n        }else{\n            this.setState({\n                deptId: deptId\n            })\n            this.getDeptList(deptId);\n        }\n    }\n    getClassUserList(classId){\n        axios.get(this.state.domain + \"/homeschool/classUserList?classId=\" + classId)\n            .then(res => {\n                // alert(\"class list :\" + JSON.stringify(res.data.data.result.details));\n                alert(\"students --- \")\n                this.setState({\n                    students: res.data.data.result.details,\n                    showType:1\n                });\n                // alert(\"classUserList --- \" + JSON.stringify(this.state.students))\n            }).catch(error => {\n            alert(\"class err \" + JSON.stringify(error))\n        })\n    }\n    getDeptList(deptId){\n        axios.get(this.state.domain + \"/homeschool/deptList?deptId=\" + deptId)\n            .then(res => {\n                // alert(\"dept list :\" + JSON.stringify(res.data.data.result.details));\n                this.setState({\n                    deptList: res.data.data.result.details,\n                    showType:0\n                });\n            }).catch(error => {\n            alert(\"dept err \" + JSON.stringify(error))\n        })\n    }\n\n    login(){\n        axios.get(this.state.domain + \"/getCorpId\")\n            .then(res => {\n                if(res.data) {\n                    this.loginAction(res.data);\n                }\n            }).catch(error => {\n            alert(\"corpId err, \" + JSON.stringify(error))\n        })\n    }\n    loginAction(corpId) {\n        // alert(\"corpId: \" +  corpId);\n        let _this = this;\n        dd.runtime.permission.requestAuthCode({\n            corpId: corpId,//企业 corpId\n            onSuccess : function(res) {\n                // 调用成功时回调\n                _this.state.authCode = res.code\n                axios.get(_this.state.domain + \"/login?authCode=\" + _this.state.authCode\n                ).then(res => {\n                    if (res && res.data.success) {\n                        let userId = res.data.data.userId;\n                        let userName = res.data.data.userName;\n                        alert('登录成功，你好' + userName);\n                        setTimeout(function () {\n                            _this.setState({\n                                userId:userId,\n                                userName:userName\n                            })\n                        }, 0)\n                        _this.getDeptList(0);\n                    } else {\n                        alert(\"login failed --->\" + JSON.stringify(res));\n                    }\n                }).catch(error => {\n                    alert(\"httpRequest failed --->\" + JSON.stringify(error))\n                })\n            },\n            onFail : function(err) {\n                // 调用失败时回调\n                alert(\"requestAuthCode failed --->\" + JSON.stringify(err))\n            }\n        });\n    }\n\n}\n\nexport default withRouter(App)\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {BrowserRouter, Route} from 'react-router-dom'\n\nReactDOM.render(\n    <BrowserRouter basename='/'>\n        <Route path={`/`} component={App}></Route>\n    </BrowserRouter>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}